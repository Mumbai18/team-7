<!doctype html>
<html>
	<head>
		<title>Line Chart</title>
		<script src="assets/js/Chart.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.3/Chart.bundle.min.js"></script>

	</head>
	<body>
		<div style="width:30%">
			<div>
				<canvas id="canvas" height="450" width="600"></canvas>
			</div>
			<p id="test"></p>
		</div>


	<script>
		var xhttp = new XMLHttpRequest();
		  xhttp.onreadystatechange = function() {
		    if (this.readyState == 4 && this.status == 200) {
		     // document.getElementById("demo").innerHTML = this.responseText;
		     document.getElementById("test").innerHTML = this.responseText;
		     display(this.responseText);
		    }
		  };
		  xhttp.open("post", "get_chart_data.php", true);
		  xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		  xhttp.send("id=1");
		  xhttp.send();

		 // $.post("get_chart_data.php",
                function display(data)
                {
                    console.log(data);
                    var data_json = JSON.parse(data);
                     var playerid = [];
                    var score = [];
                    

                    for (var i in data_json) {
                        playerid.push(data_json[i].playerid);
                        score.push(data_json[i].score);
                    }
                    console.log("playerid = " + playerid[0]);

                    var chartdata = {
                        labels: playerid,
                        datasets: [
                            {
                                label: 'Student Marks',
                                backgroundColor: '#49e2ff',
                                borderColor: '#46d5f1',
                                hoverBackgroundColor: '#CCCCCC',
                                hoverBorderColor: '#666666',
                                data: score
                            }
                        ]
                    };

                    var graphTarget = document.getElementById("canvas");

                    var barGraph = new Chart(graphTarget, {
                        type: 'line',
                        data: chartdata
                    });

                    var ctx = document.getElementById("canvas").getContext("2d");
					window.myLine = new Chart(ctx).Line(chartdata, {
						responsive: true
					});
                };

		// var randomScalingFactor = function(){ return Math.round(Math.random()*100)};
		// var lineChartData = {
		// 	labels : ["January","February","March","April","May","June","July"],
		// 	datasets : [
		// 		{
		// 			label: "My First dataset",
		// 			fillColor : "rgba(220,220,220,0.2)",
		// 			strokeColor : "rgba(220,220,220,1)",
		// 			pointColor : "rgba(220,220,220,1)",
		// 			pointStrokeColor : "#fff",
		// 			pointHighlightFill : "#fff",
		// 			pointHighlightStroke : "rgba(220,220,220,1)",
		// 			data : [randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]
		// 		},
		// 		{
		// 			label: "My Second dataset",
		// 			fillColor : "rgba(151,187,205,0.2)",
		// 			strokeColor : "rgba(151,187,205,1)",
		// 			pointColor : "rgba(151,187,205,1)",
		// 			pointStrokeColor : "#fff",
		// 			pointHighlightFill : "#fff",
		// 			pointHighlightStroke : "rgba(151,187,205,1)",
		// 			data : [randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]
		// 		}
		// 	]

		// }

	// window.onload = function(){
	// 	var ctx = document.getElementById("canvas").getContext("2d");
	// 	window.myLine = new Chart(ctx).Line(chartdata, {
	// 		responsive: true
	// 	});
	// }


	</script>
	</body>
</html>
